# Kernel Wishlist

1. Remove the need for `CAP_DAC_READ_SEARCH` to use [`linkat(2)`](http://man7.org/linux/man-pages/man2/linkat.2.html) with `AT_EMPTY_PATH`. You can already get this functionality in a less-clean way by using `/proc/self/fd/#` and `AT_SYMLINK_FOLLOW` instead of `AT_EMPTY_PATH` without that permission. If you deliberately unmount `/proc` to make this impossible, then just use seccomp-bpf, SELinux, or something to block this instead of insisting that it be blocked for everyone by default. This was briefly done in [torvalds/linux@`bb2314b`](https://github.com/torvalds/linux/commit/bb2314b), but was then undone in [torvalds/linux@`f0cc6ff`](https://github.com/torvalds/linux/commit/f0cc6ff). The latter commit message said "we're still busily discussing the exact details of this all, so I'm going to revert it for now" and "We may re-do this ... once the whole discussion about the interface is done.", but I can find no further discussion about this.
2. Add a `pfutex` system call that works just like [`futex(2)`](http://man7.org/linux/man-pages/man2/futex.2.html) but with an extra `const sigset_t *sigmask` parameter to atomically change which signals are blocked, analogous to [`pselect(2)`](http://man7.org/linux/man-pages/man2/pselect.2.html) vs. `select` and [`ppoll(2)`](http://man7.org/linux/man-pages/man2/ppoll.2.html) vs. `poll`, and for the same reasons.
3. Make it possible to [`bind(2)`](http://man7.org/linux/man-pages/man2/bind.2.html) to an existing [`unix(7)`](http://man7.org/linux/man-pages/man7/unix.7.html) domain socket file. Currently, once the last process bound to such a file exits, it becomes utterly useless (always returning `ECONNREFUSED` when trying to [`connect(2)`](http://man7.org/linux/man-pages/man2/connect.2.html) to it), but remains on disk to cause `EADDRINUSE` when the process restarts and tries to re-bind it, even if using `SO_REUSEADDR`.
